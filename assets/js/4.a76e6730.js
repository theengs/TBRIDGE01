(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{429:function(e,t,a){e.exports=a.p+"assets/img/Theengs-Plug-Settings-HomeAssistant.1bf06f13.png"},430:function(e,t,a){e.exports=a.p+"assets/img/Theengs-Plug-Settings-HomeAssistant-2.b82edac6.png"},431:function(e,t,a){e.exports=a.p+"assets/img/Theengs-Plug-Settings-HomeAssistant-3.292ea1aa.png"},440:function(e,t,a){"use strict";a.r(t);var s=a(65),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"user-guide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-guide"}},[e._v("#")]),e._v(" User Guide")]),e._v(" "),s("h2",{attrs:{id:"led-indicator-guide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#led-indicator-guide"}},[e._v("#")]),e._v(" LED Indicator Guide")]),e._v(" "),s("h3",{attrs:{id:"steady-orange"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#steady-orange"}},[e._v("#")]),e._v(" Steady Orange")]),e._v(" "),s("p",[e._v("The bridge is generating an Access Point for network onboarding.")]),e._v(" "),s("h3",{attrs:{id:"orange-5-seconds-on-5-seconds-off"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#orange-5-seconds-on-5-seconds-off"}},[e._v("#")]),e._v(" Orange (5 seconds on, 5 seconds off)")]),e._v(" "),s("p",[e._v("The bridge is disconnected from the MQTT broker.")]),e._v(" "),s("h3",{attrs:{id:"orange-2-seconds-on-2-seconds-off"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#orange-2-seconds-on-2-seconds-off"}},[e._v("#")]),e._v(" Orange (2 seconds on, 2 seconds off)")]),e._v(" "),s("p",[e._v("The bridge is disconnected from the WiFi network.")]),e._v(" "),s("h3",{attrs:{id:"steady-green"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#steady-green"}},[e._v("#")]),e._v(" Steady Green")]),e._v(" "),s("p",[e._v("The bridge is connected to both the network and the MQTT broker.")]),e._v(" "),s("h3",{attrs:{id:"steady-blue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#steady-blue"}},[e._v("#")]),e._v(" Steady Blue")]),e._v(" "),s("p",[e._v("An update or operation is currently in progress.")]),e._v(" "),s("h3",{attrs:{id:"flashing-blue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flashing-blue"}},[e._v("#")]),e._v(" Flashing Blue")]),e._v(" "),s("p",[e._v("Scanning or communication is in progress.")]),e._v(" "),s("h2",{attrs:{id:"modules-and-parameters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#modules-and-parameters"}},[e._v("#")]),e._v(" Modules and Parameters")]),e._v(" "),s("h3",{attrs:{id:"home-assistant-discovery-convention"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#home-assistant-discovery-convention"}},[e._v("#")]),e._v(" Home Assistant Discovery Convention")]),e._v(" "),s("p",[e._v("The bridge publishes its configuration and detected BLE sensors to the broker following the "),s("a",{attrs:{href:"https://www.home-assistant.io/integrations/mqtt/#mqtt-discovery",target:"_blank",rel:"noopener noreferrer"}},[e._v("Home Assistant discovery convention"),s("OutboundLink")],1),e._v(". You can find the devices in the Configuration->Devices menu with "),s("a",{attrs:{href:"https://docs.openmqttgateway.com/integrate/home_assistant.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Home Assistant"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",{attrs:{align:"left"}},[s("img",{attrs:{src:a(429)}})]),e._v(" "),s("p",{attrs:{align:"left"}},[s("img",{attrs:{src:a(430)}})]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),s("p",[e._v("Other controllers can also use the Home Assistant convention for automatic discovery.")])]),e._v(" "),s("h3",{attrs:{id:"bluetooth-gateway"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bluetooth-gateway"}},[e._v("#")]),e._v(" Bluetooth Gateway")]),e._v(" "),s("p",[e._v("The bridge detects "),s("a",{attrs:{href:"https://docs.openmqttgateway.com/prerequisites/devices.html#for-ble-devices",target:"_blank",rel:"noopener noreferrer"}},[e._v("Bluetooth devices"),s("OutboundLink")],1),e._v(" and publishes their data to the MQTT broker.")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('home/112233445566/BTtoMQTT/AABBCCDDEEFF\n{"id":"AA:BB:CC:DD:EE:FF","rssi":-88,"brand":"ClearGrass/Qingping","model":"Alarm Clock","model_id":"CGC1/CGD1","tempc":20.3,"tempf":68.54,"hum":55.3,"batt":41}\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("For example with auto-discovery\n")]),s("p",{attrs:{align:"left"}},[s("img",{attrs:{src:a(431)}})]),s("p"),e._v(" "),s("h3",{attrs:{id:"default-parameters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-parameters"}},[e._v("#")]),e._v(" Default parameters")]),e._v(" "),s("ul",[s("li",[e._v("Adaptive scanning activated (from v1.5.0)")]),e._v(" "),s("li",[e._v("Connect to BLE devices deactivated")]),e._v(" "),s("li",[e._v("BLE adaptive scan activated")])]),e._v(" "),s("p",[e._v("The BLE parameters can be changed with the commands detailed into "),s("a",{attrs:{href:"https://docs.openmqttgateway.com/use/ble.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("BLE gateway usage"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"erasing-theengs-bridge-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#erasing-theengs-bridge-configuration"}},[e._v("#")]),e._v(" Erasing Theengs Bridge configuration")]),e._v(" "),s("p",[e._v("If connected to an MQTT broker, the bridge configuration can be erased with an "),s("a",{attrs:{href:"https://docs.openmqttgateway.com/use/gateway.html#erase-the-esp-settings",target:"_blank",rel:"noopener noreferrer"}},[e._v("MQTT command"),s("OutboundLink")],1),e._v(' or the button available in HA "SYS: Erase credentials".\nIf not connected to an MQTT broker you can reset the board by following the procedure below:')]),e._v(" "),s("ul",[s("li",[e._v("Connect the bridge to your computer with a USB cable")]),e._v(" "),s("li",[e._v("Go to the upload portal https://docs.openmqttgateway.com/dev/upload/web-install.html")]),e._v(" "),s("li",[e._v('Select "theengs-bridge", and keep "Erase Flash" selected')]),e._v(" "),s("li",[e._v("Click on INSTALL, and wait a few minutes")]),e._v(" "),s("li",[e._v("The bridge will have now the latest version and the settings erased")])]),e._v(" "),s("h2",{attrs:{id:"updating-theengs-bridge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updating-theengs-bridge"}},[e._v("#")]),e._v(" Updating Theengs Bridge")]),e._v(" "),s("p",[e._v("Theengs bridge can benefit from updates following these different methods:")]),e._v(" "),s("ul",[s("li",[e._v("From Home Assistant directly, Settings->Devices & Services->Devices, click on the bridge, click on the firmware version, click Update")]),e._v(" "),s("li",[e._v("By connecting to your computer with a USB cable\n"),s("ul",[s("li",[e._v("Go to the upload portal https://docs.openmqttgateway.com/dev/upload/web-install.html")]),e._v(" "),s("li",[e._v('Select "theengs-bridge", and unselect "Erase Flash" to keep your parameters')]),e._v(" "),s("li",[e._v("Click on INSTALL, and wait a few minutes")]),e._v(" "),s("li",[e._v("The bridge will have now the latest version")])])]),e._v(" "),s("li",[e._v("From the WifiManager portal, by uploading a binary directly to the bridge\n"),s("ul",[s("li",[e._v('Download the last version binary named "Theengs-Bridge-firmware" from the Github '),s("a",{attrs:{href:"https://github.com/1technophile/OpenMQTTGateway/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("release page of OpenMQTTGateway"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("Connect to the Wifi access point with your smartphone")]),e._v(" "),s("li",[e._v("Click Update")]),e._v(" "),s("li",[e._v("Add the binary downloaded previously")]),e._v(" "),s("li",[e._v('Click Update and wait a few minutes until you get "Update successfull"')]),e._v(" "),s("li",[e._v("Reconfigure the bridge into the Wifi portal")])])]),e._v(" "),s("li",[e._v("From an MQTT command to trigger the download of the firmware from a webserver\n"),s("ul",[s("li",[e._v("Connect to your MQTT broker with a client like MQTT Explorer")]),e._v(" "),s("li",[e._v("Publish the update command like below (OTAPASSWORD being your Over The Air password if you changed it during the configuration):")])])])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('{\n  "version": "latest"\n}\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("To this topic (112233445566 being your gateway_name):")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("home/112233445566/commands/MQTTtoSYS/firmware_update\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("The bridge will restart with the new version")])])])}),[],!1,null,null,null);t.default=r.exports}}]);